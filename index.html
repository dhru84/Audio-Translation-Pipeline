<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Translation Pipeline</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-language"></i> Audio Translation Pipeline</h1>
            <p>Convert audio from one language to another using AI</p>
        </header>

        <main>
            <form id="translationForm" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="api_key">
                        <i class="fas fa-key"></i> Sarvam AI API Key
                    </label>
                    <input type="password" id="api_key" name="api_key" required 
                           placeholder="Enter your Sarvam AI API key">
                    <small>Your API key will be used to process the audio translation</small>
                </div>

                <div class="form-group">
                    <label for="audio_file">
                        <i class="fas fa-file-audio"></i> Audio File
                    </label>
                    <div class="file-input-wrapper">
                        <input type="file" id="audio_file" name="audio_file" 
                               accept=".wav,.mp3,.flac,.aac,.m4a" required>
                        <div class="file-input-display">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <span>Click to select audio file or drag and drop</span>
                        </div>
                    </div>
                    <small>Supported formats: WAV, MP3, FLAC, AAC, M4A (Max size: 100MB)</small>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="source_language">
                            <i class="fas fa-microphone"></i> Source Language
                        </label>
                        <select id="source_language" name="source_language" required>
                            <option value="en-IN">English (India)</option>
                            <option value="hi-IN">Hindi (India)</option>
                            <option value="kn-IN">Kannada (India)</option>
                            <option value="ta-IN">Tamil (India)</option>
                            <option value="te-IN">Telugu (India)</option>
                            <option value="ml-IN">Malayalam (India)</option>
                            <option value="bn-IN">Bengali (India)</option>
                            <option value="gu-IN">Gujarati (India)</option>
                            <option value="mr-IN">Marathi (India)</option>
                            <option value="pa-IN">Punjabi (India)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="target_language">
                            <i class="fas fa-volume-up"></i> Target Language
                        </label>
                        <select id="target_language" name="target_language" required>
                            <option value="kn-IN" selected>Kannada (India)</option>
                            <option value="en-IN">English (India)</option>
                            <option value="hi-IN">Hindi (India)</option>
                            <option value="ta-IN">Tamil (India)</option>
                            <option value="te-IN">Telugu (India)</option>
                            <option value="ml-IN">Malayalam (India)</option>
                            <option value="bn-IN">Bengali (India)</option>
                            <option value="gu-IN">Gujarati (India)</option>
                            <option value="mr-IN">Marathi (India)</option>
                            <option value="pa-IN">Punjabi (India)</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="output_directory">
                        <i class="fas fa-folder-open"></i> Output Directory
                    </label>
                    <input type="text" id="output_directory" name="output_directory" 
                           value="output" required 
                           placeholder="Enter output directory path">
                    <small>Directory where the translated audio will be saved</small>
                </div>

                <button type="submit" id="convertBtn" class="convert-btn">
                    <i class="fas fa-sync-alt"></i>
                    <span>Convert Audio</span>
                </button>
            </form>

            <!-- Progress Section -->
            <div id="progressSection" class="progress-section hidden">
                <div class="progress-container">
                    <div class="progress-header">
                        <h3><i class="fas fa-cogs"></i> Processing Audio</h3>
                        <div class="progress-status" id="progressStatus">Initializing...</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-details" id="progressDetails">
                        Starting audio translation pipeline...
                    </div>
                </div>
            </div>

            <!-- Success Section -->
            <div id="successSection" class="success-section hidden">
                <div class="success-content">
                    <i class="fas fa-check-circle"></i>
                    <h3>Translation Completed Successfully!</h3>
                    <p>Your audio has been translated and saved to the specified output directory.</p>
                    <div class="success-details" id="successDetails"></div>
                    <button onclick="resetForm()" class="reset-btn">
                        <i class="fas fa-plus"></i> Translate Another File
                    </button>
                </div>
            </div>

            <!-- Error Section -->
            <div id="errorSection" class="error-section hidden">
                <div class="error-content">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h3>Translation Failed</h3>
                    <p id="errorMessage">An error occurred during translation.</p>
                    <button onclick="resetForm()" class="reset-btn">
                        <i class="fas fa-redo"></i> Try Again
                    </button>
                </div>
            </div>
        </main>

        <footer>
            <p>&copy; 2025 Audio Translation Pipeline. Powered by Sarvam AI.</p>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>